generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model UserEMails {
  userID    String   @map("user_id") @db.VarChar(20)
  userEMail String   @map("user_email") @db.VarChar(256)
  userName  String   @map("user_name") @db.VarChar(256)
  createdAt DateTime @map("created_at") @db.Timestamp(6)
  submittedBadgesInfo SubmittedBadges[]

  @@id([userID])
  @@unique([userEMail])
  @@map("user_emails")
}

model SubmittedBadges {
  userEMail       String      @map("user_email") @db.VarChar(256)
  submittedAt     DateTime    @map("submitted_at") @db.Timestamp(6)
  badgeName       String      @map("badge_name") @db.VarChar(256)
  badgeClassId    String      @map("badge_class_id")
  badgeEMail      String      @map("badge_email") @db.VarChar(256)
  badgeIssuerName String      @map("badge_issuer_name") @db.VarChar(256)
  badgeData       Bytes       @map("badge_data")
  downloadedAt    DateTime?   @map("downloaded_at") @db.Timestamp(6)
  userEMailInfo   UserEMails? @relation(fields: [userEMail], references: [userEMail], onDelete: NoAction, onUpdate: NoAction)

  @@id([userEMail, submittedAt, badgeClassId])
  @@index([badgeName])
  @@index([downloadedAt])
  @@map("submitted_badges")
}
